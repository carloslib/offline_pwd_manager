<!DOCTYPE html>

<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="./resource/linkicon.ico">

    <title>Pass Vault</title>

    <!-- Bootstrap core CSS -->
    <link href="{{ url_for('static', filename='bootstrap.min.css') }}" rel="stylesheet">
    <link href="{{ url_for('static', filename='table.css') }}" rel="stylesheet">
    <!-- Custom styles for this template -->
    <link href="{{ url_for('static', filename='form-validation.css') }}" rel="stylesheet">
    <style>
      html,
body {
  height: 100%;
}

body {
  display: -ms-flexbox;
  display: flex;
  -ms-flex-align: center;
  align-items: center;
  /* padding-top: 40px; */
  /* padding-bottom: 40px; */
  background-color: #f5f5f5;
}
.form-signin {
  width: 100%;
  max-width: 330px;
  padding: 15px;
  margin: auto;
}
.topleft {
  position: absolute;
  top: 8px;
  left: 16px;
  font-size: 18px;
}
    </style>
  </head>

  <body class="bg-light">
   
  <h5 class="navbar-brand topleft">PassVault</h5>
  
  </button>

 
</nav>
    <div class="container">
    <!--  <div class="py-5 text-center">
        <img class="d-block mx-auto mb-4" src="https://www.sap.com/dam/application/imagelibrary/pictograms/283000/283293-pictogram-blue.svg.adapt.svg/1516395947483.svg" alt="" width="172" height="172">
        <h2>Security Testing Self Service</h2>
        <p class="lead">Welcome to Security Tools Service Page. Self service offers basic services for you to enable and setup Security tools provided by SAP</p>
      </div>-->
<div class="row" name="options">   
<div class="col col-lg-12">
      <div class="card bg-light">
        <div class="card-body">

                    <div class="alert alert-danger" role="alert" id="registerUserAlert">  sample text </div>
                   
                      <div class="mb-3">
                        <div class="input-group mb-2 form-signin">
                          <input type="password" class="form-control" id="password" name="password" placeholder="Password" required="">                
                          <div class="invalid-feedback" style="width: 100%;">
                            Password is required.
                          </div>
                        </div>
                        
                      </div>
                      <hr class="mb-2">
                       
                    
                      <div class="mb-4">  </div>
          <br>
          </div>
      </div>
    </div>
 
    </div>
  </div>
  <footer class="text-muted  text-small footer bg-light ">
            <hr class="mb-2">

<!-- Send a license-->
  </footer>
    </div>


   <!-- <script src="./resource/holder.min.js.download"></script>-->
   <script src="{{ url_for('static', filename='materialize.min.js') }}"></script>
    <script src="{{ url_for('static', filename='table.js') }}"></script>
    <script src="{{ url_for('static', filename='Jquery.3.2.1.js') }}"></script>
<!--<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
--><script src="{{ url_for('static', filename='bootstrap.min.js') }}"></script>
   <script>
      // Example starter JavaScript for disabling form submissions if there are invalid fields
      (function() {
        'use strict';

        window.addEventListener('load', function() {
          // Fetch all the forms we want to apply custom Bootstrap validation styles to
          var forms = document.getElementsByClassName('needs-validation');

          // Loop over them and prevent submission
          var validation = Array.prototype.filter.call(forms, function(form) {
            form.addEventListener('submit', function(event) {
              if (form.checkValidity() === false) {
                event.preventDefault();
                event.stopPropagation();
              }
              form.classList.add('was-validated');
            }, false);
          });
        }, false);
      })();
    </script>

<script>
  $('input').on('keypress', function(e) {
    var code = e.keyCode || e.which;
    if(code==13){
      event.preventDefault();
     var password= $("#password").val();
      var formData={"password":password}
      var xhr=callEndpoint("/login","#registerUserAlert",'#collapseExample',formData) 
    }
});
  function callEndpoint(url,alertclass,collapseclass,databject){
    var xhr = $.post( url,databject, function() {
    console.log("Action performed");
    })
          .done(function(data) {
            $(alertclass).attr("class","alert alert-success");
            $(alertclass).text("Success").show().delay(5000).fadeOut(800);
            console.log(data);
            location.href = "/login"
          })
          .fail(function(xhr,errortext,errorthrown) {
              $(alertclass).attr("class","alert alert-danger");  
              $(alertclass).text(xhr.responseText).show().delay(10000).fadeOut(800);
          })
          .always(function(data){
            jQuery(collapseclass).collapse('show');
          });
  }
 
  $( document ).ready(function() {
    $(".alert").hide();

});
 

</script>
</body></html>
